(this.webpackJsonpcrud_app=this.webpackJsonpcrud_app||[]).push([[0],{250:function(e,t,a){},251:function(e,t,a){},473:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),o=a(134),s=a.n(o),r=(a(250),a(28)),i=a(29),l=a(36),j=a(62),b=(a(251),a(5)),u=a(35),d=a.n(u),h=a(492),p=a(493),O=a(64),g=a(2);function x(){var e="https://pip-react-spring-postgres.herokuapp.com",t=Object(c.useState)([]),a=Object(b.a)(t,2),n=a[0],o=a[1];Object(c.useEffect)((function(){console.log("hello"),d.a.get("".concat(e,"/api/v1/loanpass")).then((function(e){console.log(e.data),o(e.data)}))}),[]);var s=function(t){d.a.delete("".concat(e,"/api/v1/loanpass/").concat(t)).then((function(){d.a.get("".concat(e,"/api/v1/loanpass")).then((function(e){o(e.data)}))}))};return Object(g.jsx)("div",{children:Object(g.jsxs)(h.a,{singleLine:!0,children:[Object(g.jsx)(h.a.Header,{children:Object(g.jsxs)(h.a.Row,{children:[Object(g.jsx)(h.a.HeaderCell,{children:"passId"}),Object(g.jsx)(h.a.HeaderCell,{children:"attractionId"}),Object(g.jsx)(h.a.HeaderCell,{children:"passNumber"}),Object(g.jsx)(h.a.HeaderCell,{children:"previousLoanBy"}),Object(g.jsx)(h.a.HeaderCell,{children:"description"})]})}),Object(g.jsx)(h.a.Body,{children:n.map((function(e){return Object(g.jsxs)(h.a.Row,{children:[Object(g.jsx)(h.a.Cell,{children:e.passId}),Object(g.jsx)(h.a.Cell,{children:e.attractionId}),Object(g.jsx)(h.a.Cell,{children:e.passNumber}),Object(g.jsx)(h.a.Cell,{children:e.previousLoanBy}),Object(g.jsx)(h.a.Cell,{children:e.description}),Object(g.jsx)(O.b,{to:"/react/update",children:Object(g.jsx)(h.a.Cell,{children:Object(g.jsx)(p.a,{onClick:function(){return function(e){var t=e.passId,a=e.attractionId,c=e.passNumber,n=e.previousLoanBy,o=e.description;localStorage.setItem("passId",t),localStorage.setItem("attractionId",a),localStorage.setItem("passNumber",c),localStorage.setItem("previousLoanBy",n),localStorage.setItem("description",o)}(e)},children:"Update"})})}),Object(g.jsx)(h.a.Cell,{children:Object(g.jsx)(p.a,{onClick:function(){return s(e.passId)},children:"Delete"})})]})}))})]})})}var f=a(491),v=a(12);function m(){var e=Object(v.m)(),t=Object(c.useState)(""),a=Object(b.a)(t,2),n=a[0],o=a[1],s=Object(c.useState)(""),r=Object(b.a)(s,2),i=r[0],l=r[1],j=Object(c.useState)(""),u=Object(b.a)(j,2),h=u[0],O=u[1],x=Object(c.useState)(""),m=Object(b.a)(x,2),C=m[0],I=m[1],y=Object(c.useState)(""),k=Object(b.a)(y,2),S=k[0],w=k[1];Object(c.useEffect)((function(){o(localStorage.getItem("passId")),l(localStorage.getItem("attractionId")),O(localStorage.getItem("passNumber")),I(localStorage.getItem("previousLoanBy")),w(localStorage.getItem("description"))}),[]);return Object(g.jsx)("div",{children:Object(g.jsxs)(f.a,{className:"create-form",children:[Object(g.jsxs)(f.a.Field,{children:[Object(g.jsx)("label",{children:"attractionId"}),Object(g.jsx)("input",{placeholder:"attractionId",value:i,onChange:function(e){return l(e.target.value)}})]}),Object(g.jsxs)(f.a.Field,{children:[Object(g.jsx)("label",{children:"passNumber"}),Object(g.jsx)("input",{placeholder:"passNumber",value:h,onChange:function(e){return O(e.target.value)}})]}),Object(g.jsxs)(f.a.Field,{children:[Object(g.jsx)("label",{children:"previousLoanBy"}),Object(g.jsx)("input",{placeholder:"previousLoanBy",value:C,onChange:function(e){return I(e.target.value)}})]}),Object(g.jsxs)(f.a.Field,{children:[Object(g.jsx)("label",{children:"description"}),Object(g.jsx)("input",{placeholder:"description",value:S,onChange:function(e){return w(e.target.value)}})]}),Object(g.jsx)(p.a,{type:"submit",onClick:function(){d.a.put("".concat("https://pip-react-spring-postgres.herokuapp.com","/api/v1/loanpass/").concat(n,"?attractionId=").concat(i,"&passNumber=").concat(h,"&previousLoanBy=").concat(C,"&description=").concat(S,")"),null).then((function(){e("/react/read")})).catch((function(e){alert("error in update! staying on this page."+e)}))},children:"Update"})]})})}var C=a(495);function I(){var e="https://pip-react-spring-postgres.herokuapp.com",t=Object(v.m)(),a=Object(c.useState)(""),n=Object(b.a)(a,2),o=n[0],s=n[1],r=Object(c.useState)(""),i=Object(b.a)(r,2),l=i[0],j=i[1],u=Object(c.useState)(""),h=Object(b.a)(u,2),O=h[0],x=h[1],m=Object(c.useState)(!1),I=Object(b.a)(m,2),y=I[0],k=I[1];return Object(g.jsx)("div",{children:Object(g.jsxs)(f.a,{className:"create-form",children:[Object(g.jsxs)(f.a.Field,{children:[Object(g.jsx)("label",{children:"attractionId"}),Object(g.jsx)("input",{placeholder:"attractionId",onChange:function(e){return s(e.target.value)}})]}),Object(g.jsxs)(f.a.Field,{children:[Object(g.jsx)("label",{children:"PassNumber"}),Object(g.jsx)("input",{placeholder:"PassNumber",onChange:function(e){return j(e.target.value)}})]}),Object(g.jsxs)(f.a.Field,{children:[Object(g.jsx)("label",{children:"description"}),Object(g.jsx)("input",{placeholder:"description",onChange:function(e){return x(e.target.value)}})]}),Object(g.jsx)(f.a.Field,{children:Object(g.jsx)(C.a,{label:"I agree to the Terms and Conditions",onChange:function(e){return k(!y)}})}),Object(g.jsx)(p.a,{onClick:function(){alert("sent a post request:\n"+("{attractioId: "+o+",\n passNumber: "+l+",\n description: "+O+"}")+"\nto ".concat(e,"/api/v1/loanpass")),d.a.post("".concat(e,"/api/v1/loanpass"),{attractionId:o,passNumber:l,description:O}).then((function(){alert("success! going to read page"),t("/react/read")})).catch((function(e){alert("error in creation! staying on this page."+e)}))},type:"submit",children:"Submit"})]})})}a(280);var y=a(143),k=a.n(y),S=a(4),w=a(125),L=a(496),N=a(229),D="https://pip-react-spring-postgres.herokuapp.com",F=[];d.a.get("".concat(D,"/api/v1/attractions")).then((function(e){F=[],console.log(e.data),e.data.forEach((function(e){F.push({value:e.attractionID,label:e.name})})),console.log(F)}));var B={option:function(e){return Object(S.a)(Object(S.a)({},e),{},{color:"black"})},control:function(e){return Object(S.a)(Object(S.a)({},e),{},{color:"black"})},singleValue:function(e){return Object(S.a)(Object(S.a)({},e),{},{color:"black"})}};function P(){var e=Object(c.useState)(),t=Object(b.a)(e,2),a=t[0],n=t[1],o=function(){return Object(g.jsx)(w.a,{placeholder:"Loading options from backend.. please wait",styles:B,options:F,defaultValue:[F[0]],value:a,onChange:function(e){return m(e)}})},s=Object(c.useState)(Object(L.a)(new Date,1)),r=Object(b.a)(s,2),i=r[0],l=r[1],j=Object(c.useState)("click on a date to view waitlist"),u=Object(b.a)(j,2),h=u[0],p=u[1],O=Object(c.useState)([]),x=Object(b.a)(O,2),f=x[0],v=x[1],m=function(e){n(e),C(i,e)},C=function(e,t){l(e),n(t),p("loading..."),console.log(e);var a=e.getDate(),c=e.getMonth()+1,o=e.getFullYear(),s=1;try{s=t.value}catch(i){s=1}console.log(t);var r="".concat(s,",").concat(a,",").concat(c,",").concat(o);d.a.get("".concat(D,"/api/v1/bookingdate/").concat(r)).then((function(e){console.log(e.data),p(e.data.waitingList);var t=e.data.waitingList;v(t.split(","))})).catch((function(e){p("no bookings"),v([])}))};return Object(c.useEffect)((function(){console.log("useEffect only once!"),C(i,a)}),[""]),Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"Place:"}),Object(g.jsx)(o,{}),Object(g.jsx)("br",{}),Object(g.jsx)(N.a,{value:i,onChange:function(e){return C(e,a)}}),Object(g.jsx)("h1",{children:"Waiting list:"}),Object(g.jsx)("p",{children:h}),f.map((function(e,t){return Object(g.jsx)("div",{children:Object(g.jsx)("button",{onClick:function(){alert("Userid "+e+" details\nname:\ncontact:\nemail:\n")},children:e})},t)}))]})}var E="https://pip-react-spring-postgres.herokuapp.com",H=[];d.a.get("".concat(E,"/api/v1/attractions")).then((function(e){H=[],console.log(e.data),e.data.forEach((function(e){H.push({value:e.attractionID,label:e.name})})),console.log(H)}));var A=[{value:"1",label:"1"},{value:"2",label:"2"}],V=[{value:"1",label:"1"},{value:"2",label:"2"}],M={option:function(e){return Object(S.a)(Object(S.a)({},e),{},{color:"black"})},control:function(e){return Object(S.a)(Object(S.a)({},e),{},{color:"black"})},singleValue:function(e){return Object(S.a)(Object(S.a)({},e),{},{color:"black"})}};function T(){var e=Object(c.useState)(),t=Object(b.a)(e,2),a=t[0],n=t[1],o=Object(c.useState)(Object(L.a)(new Date,1)),s=Object(b.a)(o,2),r=s[0],i=s[1],l=Object(c.useState)(),j=Object(b.a)(l,2),u=j[0],h=j[1],p=Object(c.useState)(),O=Object(b.a)(p,2),x=O[0],f=O[1],v=function(){return Object(g.jsx)(w.a,{styles:M,options:V,defaultValue:[V[0]],value:a,onChange:function(e){return n(e)}})},m=function(){return Object(g.jsx)(w.a,{placeholder:"",styles:M,options:H,defaultValue:[],value:u,onChange:function(e){h(e)}})},C=function(){return Object(g.jsx)(w.a,{styles:M,options:A,defaultValue:[],value:x,onChange:function(e){f(e)}})};return Object(c.useEffect)((function(){console.log("useEffect only once!")}),[""]),Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"Loan Application"}),Object(g.jsx)("h1",{children:"UserId:"}),Object(g.jsx)(v,{}),Object(g.jsx)("h1",{children:"No. of Passes:"}),Object(g.jsx)(C,{}),Object(g.jsx)("h1",{children:"Place:"}),Object(g.jsx)(m,{}),Object(g.jsx)("h1",{children:"Date:"}),Object(g.jsxs)("div",{children:[r.getDate(),r.getMonth()+1,r.getFullYear(),Object(g.jsx)(k.a,{onChange:i,value:r,minDate:Object(L.a)(new Date,1),maxDate:Object(L.a)(new Date,56),clearIcon:null,format:"dd/MM/yyyy"})]}),Object(g.jsx)("button",{id:"submitbtn",onClick:function(){var e=r.getDate(),t=r.getMonth()+1,c=r.getFullYear(),n=1,o="1";try{o=a.value}catch(l){console.log(l)}try{n=u.value}catch(l){console.log(l)}var s="".concat(n,",").concat(e,",").concat(t,",").concat(c),i="".concat(o);2==x.value&&(i+=",".concat(o)),alert("User "+o+" sent request to: "+"".concat(E,"/api/v1/loanpass/\n")+"Attraction: "+u.value+" Passes: "+x.value+" Date: "+e+"/"+t+"/"+c),d.a.post("".concat(E,"/api/v1/bookingdate"),{date:s,waitingList:i}).then((function(){alert("Successfully created loan application!")})).catch((function(e){console.log(e),500===e.response.status?d.a.get("".concat(E,"/api/v1/bookingdate/").concat(s)).then((function(e){var t=e.data.waitingList;alert("already booked! waiting list: ".concat(t));var a=t.split(",");a.includes(o)?alert("You are already in the waiting list!"):d.a.get("".concat(E,"/api/v1/loanpass/getbyattraction/").concat(n)).then((function(e){var c=0;if(e.data.forEach((function(e){c++})),console.log(c),a.length+x.value>c){var n="You are not in the waiting list, but there are not enough loan passes available. Do you want to be added to the waiting list?";console.log("too little passes!"),2==x.value&&a.length==c-1&&(n="There is only 1 loan pass to be booked, do you want to book it and be put on the waiting list for the next one?"),window.confirm(n)&&d.a.put("".concat(E,"/api/v1/bookingdate/").concat(s,"?waitingList=").concat(t+","+o),null).then((function(){alert("Successfully added to waiting list!"),alert(t+","+i)})).catch((function(e){alert("error in update! staying on this page."+e),console.log(e)}))}}))})).catch((function(e){console.log(e)})):alert("error:"+e)}))},children:"Submit"})]})}a(468);var U=a(227),Y=a(95),R=a(138),q=a(94);var J=function(){return Object(g.jsx)("div",{children:Object(g.jsx)("h1",{children:"Home Page"})})},_=function(e){Object(l.a)(a,e);var t=Object(j.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(g.jsx)(O.a,{children:Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)(R.a,{bg:"light",expand:"lg",fixed:"top",children:Object(g.jsxs)(U.a,{children:[Object(g.jsx)(R.a.Brand,{href:"#home",children:"Corporate Pass Application"}),Object(g.jsx)(R.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(g.jsx)(R.a.Collapse,{id:"basic-navbar-nav",children:Object(g.jsxs)(Y.a,{className:"me-auto",defaultActiveKey:"/react",as:"ul",children:[Object(g.jsx)(Y.a.Item,{as:"li",children:Object(g.jsx)(Y.a.Link,{href:"",children:Object(g.jsx)(O.b,{to:"/react",children:"Home"})})}),Object(g.jsx)(Y.a.Item,{as:"li",children:Object(g.jsx)(Y.a.Link,{href:"",children:Object(g.jsx)(O.b,{to:"/react/loan",children:"Loan Application"})})}),Object(g.jsx)(Y.a.Link,{href:"",children:Object(g.jsx)(O.b,{to:"/react/viewbooking",children:"View Booking"})}),Object(g.jsxs)(q.a,{title:"Loan Pass",id:"basic-nav-dropdown",children:[Object(g.jsx)(q.a.Item,{href:"",children:Object(g.jsx)(O.b,{to:"/react/createloanpass",children:"Create Loan Pass"})}),Object(g.jsx)(q.a.Item,{href:"",children:Object(g.jsx)(O.b,{to:"/react/read",children:"Read Loanpasses"})}),Object(g.jsx)(q.a.Item,{href:"",children:"Something"}),Object(g.jsx)(q.a.Divider,{}),Object(g.jsx)(q.a.Item,{href:"",children:"Separated link"})]})]})})]})}),Object(g.jsxs)("div",{className:"main",children:[Object(g.jsx)("h2",{className:"main-header",children:"Corporate Pass Application"}),Object(g.jsxs)(v.c,{children:[Object(g.jsx)(v.a,{exact:!0,path:"/react",element:Object(g.jsx)(J,{})}),Object(g.jsx)(v.a,{exact:!0,path:"/react/createloanpass",element:Object(g.jsx)(I,{})}),Object(g.jsx)(v.a,{exact:!0,path:"/react/read",element:Object(g.jsx)(x,{})}),Object(g.jsx)(v.a,{exact:!0,path:"/react/update",element:Object(g.jsx)(m,{})}),Object(g.jsx)(v.a,{exact:!0,path:"/react/loan",element:Object(g.jsx)(T,{})}),Object(g.jsx)(v.a,{exact:!0,path:"/react/viewbooking",element:Object(g.jsx)(P,{})})]})]})]})})}}]),a}(n.a.Component),K=_,W=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,497)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,o=t.getLCP,s=t.getTTFB;a(e),c(e),n(e),o(e),s(e)}))};a(471);s.a.createRoot(document.getElementById("root")).render(Object(g.jsx)(n.a.StrictMode,{children:Object(g.jsx)(K,{})})),W()}},[[473,1,2]]]);
//# sourceMappingURL=main.a5786be4.chunk.js.map