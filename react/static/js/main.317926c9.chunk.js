(this.webpackJsonpcrud_app=this.webpackJsonpcrud_app||[]).push([[0],{335:function(e,t,a){},336:function(e,t,a){},471:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(283),l=a.n(o),s=(a(335),a(20)),i=a(21),r=a(33),j=a(34),d=(a(336),a(40)),u=a(13),b=a(82),h=a(167),p=a(118),O=(a.p,a(169),a(295)),g=a(5),m=a(23),f=a.n(m),x=a(1);function v(){var e=Object(n.useState)(null),t=Object(g.a)(e,2);t[0],t[1];return Object(n.useEffect)((function(){f.a.get("http://localhost:8080/api/v1/login/logged").then((function(e){return console.log(e)}))}),[]),Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"content",children:[Object(x.jsx)("h1",{classname:"main-header",children:"Corporate Pass Application"}),Object(x.jsx)("h2",{children:"Welcome Home!"})]})})}var y=a(10),w=a(30),k=a(522),C=a(542),S=a(526),L=Object(n.createContext)({}),N=function(e){var t=e.children,a=Object(n.useState)({}),c=Object(g.a)(a,2),o=c[0],l=c[1];return Object(x.jsx)(L.Provider,{value:{auth:o,setAuth:l},children:t})},I=L,E=function(){var e=Object(n.useContext)(I).auth;return Object(n.useDebugValue)(e,(function(e){return null!==e&&void 0!==e&&e.user?"Logged In":"Logged Out"})),Object(n.useContext)(I)},A=a(286);function D(){var e=Object(n.useState)(""),t=Object(g.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),l=Object(g.a)(o,2),s=l[0],i=l[1],r=Object(n.useState)(""),j=Object(g.a)(r,2),d=j[0],u=j[1],b=Object(n.useState)(""),h=Object(g.a)(b,2),p=h[0],O=h[1],m=Object(n.useState)(!1),v=Object(g.a)(m,2),L=v[0],N=v[1],I=Object(n.useState)(0),D=Object(g.a)(I,2),F=(D[0],D[1]),T=E(),R=T.setAuth,P=T.auth;console.log(P,"NICEEEEEEE");var H=Object(n.useState)(!1),B=Object(g.a)(H,2),U=B[0],M=B[1],J=function(){var e=Object(w.a)(Object(y.a)().mark((function e(t){var n,c,o,l,s,r;return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,console.log(a,d),(c=new URLSearchParams).append("username",a),c.append("password",d),console.log(c),e.next=9,f.a.post("http://localhost:8080/api/v1/login",c);case 9:o=e.sent,console.log(JSON.stringify(null===o||void 0===o?void 0:o.data)),F(o.data),l=null===o||void 0===o||null===(n=o.data)||void 0===n?void 0:n.access_token,s=Object(A.a)(l,{payload:!0}),console.log(s,"DECODED HEADER"),console.log(null===s||void 0===s?void 0:s.roles,"DECODED ROLES"),console.log(l,"accessToken accessToken accessToken"),r=null===s||void 0===s?void 0:s.roles,console.log(P),R({username:a,phone:p,accessToken:l,roles:r}),i(""),u(""),alert("logged in as "+s.sub+" with role of "+r),e.next=27;break;case 25:e.prev=25,e.t0=e.catch(1);case 27:case"end":return e.stop()}}),e,null,[[1,25]])})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){localStorage.setItem("auth",JSON.stringify(P))}),[P]);var V=function(){c(""),i(""),u(""),O(""),M(""),N(!L)};return console.log("FINALLL AUTHHHH",P),localStorage.setItem("accessToken",P.accessToken),Object(x.jsx)("div",{class:"container rounded content",children:Object(x.jsxs)("div",{class:"card d-flex justify-content-center",style:{width:"30rem",height:"65vh"},children:[L?Object(x.jsx)("h2",{className:"main-header",children:"Login"}):Object(x.jsx)("h2",{className:"main-header",children:"Registration"}),Object(x.jsxs)(k.a,{className:"create-form",style:{margin:"auto"},children:[Object(x.jsxs)(k.a.Field,{children:[Object(x.jsx)("label",{children:"Name"}),Object(x.jsx)("input",{placeholder:"Name",onChange:function(e){return c(e.target.value)}})]}),L?Object(x.jsx)(x.Fragment,{}):Object(x.jsxs)(k.a.Field,{children:[Object(x.jsx)("label",{children:"Email"}),Object(x.jsx)("input",{placeholder:"Email",value:s,onChange:function(e){return i(e.target.value)}})]}),Object(x.jsxs)(k.a.Field,{children:[Object(x.jsx)("label",{children:"Password"}),Object(x.jsx)("input",{placeholder:"Password",value:d,onChange:function(e){return u(e.target.value)}})]}),L?Object(x.jsx)(x.Fragment,{}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(k.a.Field,{children:[Object(x.jsx)("label",{children:"Phone"}),Object(x.jsx)("input",{placeholder:"Phone",onChange:function(e){return O(e.target.value)}})]}),Object(x.jsx)(k.a.Field,{children:Object(x.jsx)(C.a,{label:"I agree to the Terms and Conditions",onChange:function(e){return M(!U)}})})]}),L?Object(x.jsx)(S.a,{onClick:J,type:"submit",children:"Login"}):Object(x.jsx)(S.a,{onClick:function(){f.a.post("http://localhost:8080/api/v1/user/save",{username:a,email:s,password:d,phoneNumber:p,userRoles:[{id:1,name:"ROLE_USER"}]}).then((function(e){console.log(e),N(!L),console.log("have accounttt",L);var t="{username: "+a+",\n email: "+s+",\n password: "+d+",\n phoneNumber: "+p+",\n userRoles: "+JSON.stringify([{id:1,name:"ROLE_USER"}])+"}";alert("sent a post request:\n"+t+"\nto http://localhost:8080/api/v1/user/save")})).catch((function(e){d.length<8?alert("Password too short \n"+e):alert("Email is not valid \n"+e)}))},type:"submit",children:"Register"}),Object(x.jsx)("hr",{}),L?Object(x.jsxs)("p",{children:["Don't have an account? Sign up ",Object(x.jsx)("a",{onClick:V,children:"here"})]}):Object(x.jsxs)("p",{children:["Already have an account? Login ",Object(x.jsx)("a",{onClick:V,children:"here"})]})]})]})})}var F=a(525),T=a(22),R=a.n(T);function P(){var e="https://pip-react-spring-postgres.herokuapp.com",t=Object(n.useState)([]),a=Object(g.a)(t,2),c=a[0],o=a[1];Object(n.useEffect)((function(){console.log("hello"),R.a.fire({title:"Loading information from database...",allowOutsideClick:!1,didOpen:function(){R.a.showLoading()}}),f.a.get("".concat(e,"/api/v1/loanpass")).then((function(e){console.log(e.data),o(e.data),R.a.close()}))}),[]);var l=function(t){R.a.fire({title:"Loading information from database...",allowOutsideClick:!1,didOpen:function(){R.a.showLoading()}}),f.a.delete("".concat(e,"/api/v1/loanpass/").concat(t)).then((function(){R.a.fire({title:"Loading information from database...",allowOutsideClick:!1,didOpen:function(){R.a.showLoading()}}),f.a.get("".concat(e,"/api/v1/loanpass")).then((function(e){o(e.data),R.a.close()})),R.a.close()}))};return Object(x.jsxs)("div",{style:{height:"50%"},children:[Object(x.jsx)(d.b,{to:"/react/createloanpass",children:Object(x.jsx)(S.a,{primary:!0,children:"Create Loan Pass"})}),Object(x.jsxs)(F.a,{children:[Object(x.jsx)(F.a.Header,{children:Object(x.jsxs)(F.a.Row,{children:[Object(x.jsxs)(F.a.HeaderCell,{width:1,children:["pass",Object(x.jsx)("br",{}),"Id"]}),Object(x.jsxs)(F.a.HeaderCell,{width:1,children:["att",Object(x.jsx)("br",{}),"rac",Object(x.jsx)("br",{}),"tion",Object(x.jsx)("br",{}),"Id"]}),Object(x.jsxs)(F.a.HeaderCell,{width:1,children:["pass",Object(x.jsx)("br",{}),"Num",Object(x.jsx)("br",{}),"ber"]}),Object(x.jsxs)(F.a.HeaderCell,{width:1,children:["previous",Object(x.jsx)("br",{}),"Loan",Object(x.jsx)("br",{}),"By"]}),Object(x.jsx)(F.a.HeaderCell,{width:1,children:"Status"}),Object(x.jsx)(F.a.HeaderCell,{width:1,children:"Type"}),Object(x.jsxs)(F.a.HeaderCell,{width:1,children:["Replace",Object(x.jsx)("br",{}),"ment Fee"]}),Object(x.jsx)(F.a.HeaderCell,{width:1,children:"Email Template"}),Object(x.jsx)(F.a.HeaderCell,{width:1,children:"Attachment Link"}),Object(x.jsx)(F.a.HeaderCell,{width:1,children:"Update"}),Object(x.jsx)(F.a.HeaderCell,{width:1,children:"Delete"})]})}),Object(x.jsx)(F.a.Body,{children:c.map((function(e){var t=e.description.split(",./"),a=t[0],n=t[1],c=t[2],o=t[3],s=t[4];try{o=o.slice(0,10)+"...",s=s.slice(0,10)+"..."}catch(i){console.log(i)}return Object(x.jsxs)(F.a.Row,{children:[Object(x.jsx)(F.a.Cell,{children:e.passId}),Object(x.jsx)(F.a.Cell,{children:e.attractionId}),Object(x.jsx)(F.a.Cell,{children:e.passNumber}),Object(x.jsx)(F.a.Cell,{children:e.previousLoanBy}),Object(x.jsx)(F.a.Cell,{children:a}),Object(x.jsx)(F.a.Cell,{children:n}),Object(x.jsx)(F.a.Cell,{children:c}),Object(x.jsx)(F.a.Cell,{children:o}),Object(x.jsx)(F.a.Cell,{children:s}),Object(x.jsx)(d.b,{to:"/react/update",children:Object(x.jsx)(F.a.Cell,{children:Object(x.jsx)(S.a,{onClick:function(){return function(e){var t=e.passId,a=e.attractionId,n=e.passNumber,c=e.previousLoanBy,o=e.description;localStorage.setItem("passId",t),localStorage.setItem("attractionId",a),localStorage.setItem("passNumber",n),localStorage.setItem("previousLoanBy",c),localStorage.setItem("description",o)}(e)},children:"Update"})})}),Object(x.jsx)(F.a.Cell,{children:Object(x.jsx)(S.a,{onClick:function(){return l(e.passId)},children:"Delete"})})]})}))})]})]})}function H(){var e="https://pip-react-spring-postgres.herokuapp.com",t=Object(u.m)(),a=Object(n.useState)(""),c=Object(g.a)(a,2),o=c[0],l=c[1],s=Object(n.useState)(""),i=Object(g.a)(s,2),r=i[0],j=i[1],d=Object(n.useState)(""),b=Object(g.a)(d,2),h=b[0],p=b[1],O=Object(n.useState)(""),m=Object(g.a)(O,2),v=m[0],y=m[1],w=Object(n.useState)(""),C=Object(g.a)(w,2),L=C[0],N=C[1],I=Object(n.useState)(""),E=Object(g.a)(I,2),A=E[0],D=E[1],F=Object(n.useState)(""),T=Object(g.a)(F,2),P=T[0],H=T[1],B=Object(n.useState)(""),U=Object(g.a)(B,2),M=U[0],J=U[1],V=Object(n.useState)(""),W=Object(g.a)(V,2),Y=W[0],_=W[1],q=Object(n.useState)(""),K=Object(g.a)(q,2),z=K[0],G=K[1],Q=Object(n.useState)(""),X=Object(g.a)(Q,2),Z=X[0],$=X[1];Object(n.useEffect)((function(){l(localStorage.getItem("passId")),j(localStorage.getItem("attractionId")),p(localStorage.getItem("passNumber")),y(localStorage.getItem("previousLoanBy")),N(localStorage.getItem("description"));var e=localStorage.getItem("description").split(",./")[0],t=localStorage.getItem("description").split(",./")[1],a=localStorage.getItem("description").split(",./")[2],n=localStorage.getItem("description").split(",./")[3],c=localStorage.getItem("description").split(",./")[4];D(e),$(e),H(t),J(a),_(n),G(c)}),[]);return Object(x.jsx)("div",{style:{width:"85%",height:"70vh",maxWidth:"500px",minWidth:"200px"},children:Object(x.jsxs)(k.a,{className:"create-form",children:[Object(x.jsxs)(k.a.Field,{children:[Object(x.jsx)("label",{children:"attractionId"}),Object(x.jsx)("input",{placeholder:"attractionId",value:r,onChange:function(e){return j(e.target.value)}})]}),Object(x.jsxs)(k.a.Field,{children:[Object(x.jsx)("label",{children:"passNumber"}),Object(x.jsx)("input",{placeholder:"passNumber",value:h,onChange:function(e){return p(e.target.value)}})]}),Object(x.jsxs)(k.a.Field,{children:[Object(x.jsx)("label",{children:"previousLoanBy"}),Object(x.jsx)("input",{placeholder:"previousLoanBy",value:v,onChange:function(e){return y(e.target.value)}})]}),Object(x.jsxs)(k.a.Field,{children:[Object(x.jsx)("label",{children:"status"}),Object(x.jsxs)("select",{value:A,onChange:function(e){return D(e.target.value)},children:[Object(x.jsx)("option",{value:"Uncollected",children:"Uncollected"}),Object(x.jsx)("option",{value:"Loaned out",children:"Loaned out"}),Object(x.jsx)("option",{value:"Lost",children:"Lost"})]})]}),Object(x.jsxs)(k.a.Field,{children:[Object(x.jsx)("label",{children:"type"}),Object(x.jsxs)("select",{value:P,onChange:function(e){return H(e.target.value)},children:[Object(x.jsx)("option",{value:"Physical",children:"Physical"}),Object(x.jsx)("option",{value:"Digital",children:"Digital"})]})]}),Object(x.jsxs)(k.a.Field,{children:[Object(x.jsx)("label",{children:"replacementFee"}),Object(x.jsx)("input",{placeholder:"replacementFee",value:M,onChange:function(e){return J(e.target.value)}})]}),Object(x.jsxs)(k.a.Field,{children:[Object(x.jsx)("label",{children:"emailTemplate"}),Object(x.jsx)("input",{placeholder:"emailTemplate",value:Y,onChange:function(e){return _(e.target.value)}})]}),Object(x.jsxs)(k.a.Field,{children:[Object(x.jsx)("label",{children:"attachmentLink"}),Object(x.jsx)("input",{placeholder:"attachmentLink",value:z,onChange:function(e){return G(e.target.value)}})]}),Object(x.jsx)(S.a,{type:"submit",onClick:function(){var a=A+",./"+P+",./"+M+",./"+Y+",./"+z;console.log(L),R.a.fire({title:"Loading information from database...",allowOutsideClick:!1,didOpen:function(){R.a.showLoading()}}),f.a.put("".concat(e,"/api/v1/loanpass/").concat(o,"?attractionId=").concat(r,"&passNumber=").concat(h,"&previousLoanBy=").concat(v,"&description=").concat(a),null).then((function(){"Loaned out"===A&&"Loaned out"!==Z&&f.a.get("".concat(e,"/api/v1/successloan/staff/").concat(v,"/attraction/").concat(r,"/month/").concat((new Date).getMonth()+1,"/year/").concat((new Date).getFullYear(),"/day/").concat((new Date).getDay())).then((function(t){0===t.data.length?f.a.post("".concat(e,"/api/v1/successloan"),{attractionId:r,staffId:v,month:(new Date).getMonth()+1,year:(new Date).getFullYear(),day:(new Date).getDay()}).then((function(){R.a.close(),alert("created success loan!")})):R.a.close()})),R.a.close(),t("/react/read")})).catch((function(e){R.a.close(),alert("error in update! staying on this page."+e)}))},children:"Update"})]})})}function B(){var e="https://pip-react-spring-postgres.herokuapp.com",t=Object(u.m)(),a=Object(n.useState)(""),c=Object(g.a)(a,2),o=c[0],l=c[1],s=Object(n.useState)(""),i=Object(g.a)(s,2),r=i[0],j=i[1],d=Object(n.useState)(""),b=Object(g.a)(d,2),h=b[0],p=(b[1],Object(n.useState)(!1)),O=Object(g.a)(p,2);O[0],O[1];return Object(x.jsx)("div",{class:"content",style:{width:"85%",height:"70vh",maxWidth:"500px",minWidth:"200px"},children:Object(x.jsxs)(k.a,{className:"create-form",children:[Object(x.jsxs)(k.a.Field,{children:[Object(x.jsx)("label",{children:"attractionId"}),Object(x.jsx)("input",{placeholder:"attractionId",onChange:function(e){return l(e.target.value)}})]}),Object(x.jsxs)(k.a.Field,{children:[Object(x.jsx)("label",{children:"PassNumber"}),Object(x.jsx)("input",{placeholder:"PassNumber",onChange:function(e){return j(e.target.value)}})]}),Object(x.jsx)(S.a,{onClick:function(){alert("sent a post request:\n"+("{attractioId: "+o+",\n passNumber: "+r+",\n description: "+h+"}")+"\nto ".concat(e,"/api/v1/loanpass")),f.a.post("".concat(e,"/api/v1/loanpass"),{attractionId:o,passNumber:r,description:h}).then((function(){alert("success! going to read page"),t("/react/read")})).catch((function(e){alert("error in creation! staying on this page."+e)}))},type:"submit",children:"Submit"})]})})}var U,M=a(4),J=a(44),V=a(153),W=a(232),Y=a.n(W),_=a(531),q=a(41),K="https://pip-react-spring-postgres.herokuapp.com",z=q.a.button(U||(U=Object(J.a)(["\n  background-color: black;\n  color: white;\n  font-size: 20px;\n  padding: 10px 60px;\n  border-radius: 10px;\n  margin: 10px 0px;\n  cursor: pointer;\n"]))),G=[],Q=[{value:"1",label:"1"},{value:"2",label:"2"}],X=[],Z={option:function(e){return Object(M.a)(Object(M.a)({},e),{},{color:"black"})},control:function(e){return Object(M.a)(Object(M.a)({},e),{},{color:"black"})},singleValue:function(e){return Object(M.a)(Object(M.a)({},e),{},{color:"black"})}};function $(){var e=Object(u.m)();Object(n.useEffect)((function(){R.a.fire({title:"Loading information from database...",allowOutsideClick:!1,didOpen:function(){R.a.showLoading()}}),f.a.get("".concat(K,"/api/v1/attractions")).then((function(e){G=[],console.log(e.data),e.data.forEach((function(e){G.push({value:e.attractionID,label:e.name})})),console.log(G),v(1),R.a.close()})),console.log("useEffect only once!"),console.log(localStorage.getItem("auth"));var e="2";X=[{value:e,label:e}],console.log(X),y(),v(1),o({value:e,label:e})}),[""]);var t=Object(n.useState)(),a=Object(g.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(Object(_.a)(new Date,1)),s=Object(g.a)(l,2),i=s[0],r=s[1],j=Object(n.useState)(),d=Object(g.a)(j,2),b=d[0],h=d[1],p=Object(n.useState)(),O=Object(g.a)(p,2),m=O[0],v=O[1],y=function(e){v(e)},w=function(){return Object(x.jsx)(V.a,{styles:Z,options:X,defaultValue:[X[0]],value:c,onChange:function(e){return o(e)}})},k=function(){return Object(x.jsx)(V.a,{placeholder:"",styles:Z,options:G,defaultValue:[],value:b,onChange:function(e){h(e)}})},C=function(){return Object(x.jsx)(V.a,{styles:Z,options:Q,defaultValue:Q[0],value:m,onChange:function(e){return y(e)}})};return Object(x.jsx)("div",{class:"container rounded content",style:{height:"100%",width:"80%"},children:Object(x.jsxs)("div",{class:"card",style:{width:"85%",height:"70vh",maxWidth:"500px",minWidth:"200px"},children:[Object(x.jsx)("h2",{className:"main-header",children:"Loan Application"}),Object(x.jsx)("h4",{className:"sub-header",children:"UserId:"}),Object(x.jsx)(w,{}),Object(x.jsx)("h4",{className:"sub-header",children:"No. of Passes:"}),Object(x.jsx)(C,{}),Object(x.jsx)("h4",{className:"sub-header",children:"Place:"}),Object(x.jsx)(k,{}),Object(x.jsx)("h4",{className:"sub-header",children:"Date:"}),Object(x.jsxs)("div",{children:[i.getDate(),i.getMonth()+1,i.getFullYear(),Object(x.jsx)(Y.a,{onChange:r,value:i,minDate:Object(_.a)(new Date,1),maxDate:Object(_.a)(new Date,56),clearIcon:null,format:"dd/MM/yyyy"})]}),Object(x.jsx)(z,{id:"submitbtn",style:{},onClick:function(){var t=i.getDate(),a=i.getMonth()+1,n=i.getFullYear(),o=1,l="1";try{l=c.value}catch(r){console.log(r)}try{o=b.value}catch(r){console.log(r)}var s="".concat(o,",").concat(t,",").concat(a,",").concat(n);f.a.get("".concat(K,"/api/v1/successloan/staff/").concat(l,"/month/").concat(a,"/year/").concat(n)).then((function(c){if(console.log(c.data),c.data.length>2)R.a.fire({icon:"error",title:"Oops...",text:"You have already applied for 2 loans this month!"});else{var i="".concat(l);2==m.value&&(i+=",".concat(l)),alert("User "+l+" sent request to: "+"".concat(K,"/api/v1/loanpass/\n")+"Attraction: "+b.value+" Passes: "+m.value+" Date: "+t+"/"+a+"/"+n),R.a.fire({title:"Loading information from database...",allowOutsideClick:!1,didOpen:function(){R.a.showLoading()}}),f.a.post("".concat(K,"/api/v1/bookingdate/save"),{date:s,waitingList:i}).then((function(){f.a.post("".concat(K,"/api/v1/successloan"),{staffId:l,attractionId:b.value,month:a,year:n,day:t}).then((function(t){R.a.close(),alert("Successfully created loan application!"),e("/react/viewbooking")}))})).catch((function(c){R.a.close(),console.log(c),500===c.response.status?(R.a.fire({title:"Loading information from database...",allowOutsideClick:!1,didOpen:function(){R.a.showLoading()}}),f.a.get("".concat(K,"/api/v1/bookingdate/").concat(s)).then((function(c){R.a.close();var r=c.data.waitingList,j=r.split(",");j.includes(l)?alert("You are already in the waiting list!"):(R.a.fire({title:"Loading information from database...",allowOutsideClick:!1,didOpen:function(){R.a.showLoading()}}),f.a.get("".concat(K,"/api/v1/loanpass/getbyattraction/").concat(o)).then((function(c){R.a.close();var o=0;if(c.data.forEach((function(e){o++})),console.log(o),j.length+parseInt(m.value)>o){var d="You are not in the waiting list, but there are not enough loan passes available. Do you want to be added to the waiting list?";console.log("too little passes!"),2==m.value&&j.length==o-1&&(d="There is only 1 loan pass to be booked, do you want to book it and be put on the waiting list for the next one?"),window.confirm(d)&&(R.a.fire({title:"Loading information from database...",allowOutsideClick:!1,didOpen:function(){R.a.showLoading()}}),f.a.put("".concat(K,"/api/v1/bookingdate/").concat(s,"?waitingList=").concat(r+","+i),null).then((function(){R.a.close(),d.includes("There is only 1 loan pass to be booked")&&f.a.post("".concat(K,"/api/v1/successloan"),{staffId:l,attractionId:b.value,month:a,year:n,day:t}).then((function(t){R.a.close(),alert("Successfully created loan application!"),e("/react/viewbooking")})),alert(r+","+i)})).catch((function(e){R.a.close(),alert("error in update! staying on this page."+e),console.log(e)})))}else R.a.fire({title:"Loading information from database...",allowOutsideClick:!1,didOpen:function(){R.a.showLoading()}}),f.a.put("".concat(K,"/api/v1/bookingdate/").concat(s,"?waitingList=").concat(r+","+i),null).then((function(){R.a.close(),alert("Successfully added to waiting list!"),alert(r+","+i),e("/react/viewbooking")})).catch((function(e){R.a.close(),alert("error in update! staying on this page."+e),console.log(e)}))})))})).catch((function(e){console.log(e)}))):alert("error:"+c)}))}}))},children:"Submit"})]})})}var ee=a(297),te="https://pip-react-spring-postgres.herokuapp.com",ae=[];R.a.fire({title:"Loading information from database...",allowOutsideClick:!1,didOpen:function(){R.a.showLoading()}}),f.a.get("".concat(te,"/api/v1/attractions")).then((function(e){R.a.close(),ae=[],console.log(e.data),e.data.forEach((function(e){ae.push({value:e.attractionID,label:e.name})})),console.log(ae)}));var ne={option:function(e){return Object(M.a)(Object(M.a)({},e),{},{color:"black"})},control:function(e){return Object(M.a)(Object(M.a)({},e),{},{color:"black"})},singleValue:function(e){return Object(M.a)(Object(M.a)({},e),{},{color:"black"})}};function ce(){var e=Object(n.useState)(),t=Object(g.a)(e,2),a=t[0],c=t[1],o=function(){return Object(x.jsx)(V.a,{placeholder:"Loading options from backend.. please wait",styles:ne,options:ae,defaultValue:[ae[0]],value:a,onChange:function(e){return v(e)}})},l=Object(n.useState)(Object(_.a)(new Date,1)),s=Object(g.a)(l,2),i=s[0],r=s[1],j=Object(n.useState)("click on a date to view waitlist"),d=Object(g.a)(j,2),u=d[0],b=d[1],h=Object(n.useState)([]),p=Object(g.a)(h,2),O=p[0],m=p[1],v=function(e){c(e),y(i,e)},y=function(e,t){r(e),c(t),b("loading..."),console.log(e);var a=e.getDate(),n=e.getMonth()+1,o=e.getFullYear(),l=1;try{l=t.value}catch(i){l=1}console.log(t);var s="".concat(l,",").concat(a,",").concat(n,",").concat(o);R.a.fire({title:"Loading information from database...",allowOutsideClick:!1,didOpen:function(){R.a.showLoading()}}),f.a.get("".concat(te,"/api/v1/bookingdate/").concat(s)).then((function(e){R.a.close(),console.log(e.data),b(e.data.waitingList);var t=e.data.waitingList;m(t.split(","))})).catch((function(e){b("no bookings"),m([])}))};return Object(n.useEffect)((function(){console.log("useEffect only once!"),y(i,a)}),[""]),Object(x.jsxs)("div",{class:"container rounded content",style:{width:"85%",height:"100%",maxWidth:"1000px",minWidth:"300px"},children:[Object(x.jsx)("h1",{class:"main-header",children:"View Booking"}),Object(x.jsxs)("div",{class:"row",children:[Object(x.jsx)("div",{class:"col-sm",children:Object(x.jsxs)("div",{class:"card",style:{width:"17rem",height:"45vh"},children:[Object(x.jsx)("h1",{class:"sub-header",children:"Place:"}),Object(x.jsx)(o,{}),Object(x.jsx)("br",{}),Object(x.jsx)(ee.a,{value:i,onChange:function(e){return y(e,a)}})]})}),Object(x.jsx)("div",{class:"col-sm",children:Object(x.jsxs)("div",{class:"card",style:{width:"17rem",height:"45vh"},children:[Object(x.jsx)("h1",{class:"sub-header",children:"Waiting list:"}),Object(x.jsx)("p",{children:u}),O.map((function(e,t){return Object(x.jsxs)("div",{children:[Object(x.jsx)("button",{onClick:function(){R.a.fire({title:"Loading information from database...",allowOutsideClick:!1,didOpen:function(){R.a.showLoading()}}),f.a.get("".concat(te,"/api/v1/users/").concat(e)).then((function(e){R.a.close(),console.log(e.data);var t="";for(var a in e.data)t+=a+" | "+e.data[a]+"\n";alert(t)})).catch((function(e){R.a.close(),alert("Cannot find user details")}))},children:e}),Object(x.jsx)("button",{onClick:function(){var t=i.getDate(),n=i.getMonth()+1,c=i.getFullYear(),o=new Date,l=(i-o)/60/60/24/1e3;if(console.log(l),l<=0)alert("Cannot cancel booking for today or past days");else if(window.confirm("Are you sure you want to remove user "+e+" from the waiting list?")){var s=1;try{s=a.value}catch(d){}var r="".concat(s,",").concat(t,",").concat(n,",").concat(c);console.log(r),console.log(u);var j=u.replaceAll(","+e,"");j=(j=j.replaceAll(e+",","")).replaceAll(e,""),console.log(j),R.a.fire({title:"Loading information from database...",allowOutsideClick:!1,didOpen:function(){R.a.showLoading()}}),""===j?f.a.delete("".concat(te,"/api/v1/bookingdate/").concat(r)).then((function(a){R.a.close(),console.log(a.data),b("no bookings"),m([]),f.a.get("".concat(te,"/api/v1/successloan/staff/").concat(e,"/attraction/").concat(s,"/month/").concat(n,"/year/").concat(c,"/day/").concat(t)).then((function(e){console.log(e.data);for(var t=0;t<e.data.length;t++){var a=e.data[t];f.a.delete("".concat(te,"/api/v1/successloan/").concat(a.successLoanId)),alert("deleted successloan")}}))})):(R.a.fire({title:"Loading information from database...",allowOutsideClick:!1,didOpen:function(){R.a.showLoading()}}),f.a.put("".concat(te,"/api/v1/bookingdate/").concat(r,"?waitingList=").concat(j),null).then((function(a){R.a.close(),b(j),m(j.split(",")),alert("User "+e+" removed from waiting list"),f.a.get("".concat(te,"/api/v1/successloan/staff/").concat(e,"/attraction/").concat(s,"/month/").concat(n,"/year/").concat(c,"/day/").concat(t)).then((function(e){for(var t=0;t<e.data.length;t++){var a=e.data[t];f.a.delete("".concat(te,"/api/v1/successloan/").concat(a.id)),alert("deleted successloan")}}))})))}},children:"Remove"})]},t)}))]})})]})]})}var oe=a(234),le=a.n(oe),se=(a(466),"https://pip-react-spring-postgres.herokuapp.com");var ie=function(e){var t=Object(n.useState)(""),a=Object(g.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),s=Object(g.a)(l,2),i=s[0],r=s[1],j=Object(u.m)();return Object(n.useEffect)((function(){e.template&&(o(e.template.emailTemplateBody),r(e.template.emailTemplateName))}),[]),Object(x.jsxs)("div",{style:{margin:"10px",padding:"10px"},children:[Object(x.jsx)("label",{children:"Email Template Name:"}),Object(x.jsx)("input",{onChange:function(e){return r(e.target.value)},value:i,className:"form-control",type:"text",placeholder:"Enter template name"}),Object(x.jsx)("br",{}),[{tagName:"Borrower Name",tagValue:"#borrowerName#"},{tagName:"Attraction Name",tagValue:"#attractionName#"},{tagName:"CorpPass No",tagValue:"#corpPassNo#"}].map((function(e){return Object(x.jsx)("button",{onClick:function(){!function(e){var t=window.getSelection(),a=t.getRangeAt(0).startContainer.parentNode;if(console.log(a),a.className.includes("ql-editor")||"P"==a.tagName){var n=t.getRangeAt(0).startOffset,c=t.getRangeAt(0).startContainer,o=c.innerText;if(o){var l=o.slice(0,n),s=o.slice(n);c.textContent=l+e.tagValue+s}else{var i=c.data.slice(0,n),r=c.data.slice(n);c.textContent=i+e.tagValue+r}}}(e)},className:"btn btn-primary",style:{padding:"5px",margin:"10px"},children:e.tagName})})),Object(x.jsx)(le.a,{theme:"snow",value:c,onChange:o}),e.template?Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("button",{className:"btn btn-primary",onClick:function(){f.a.put("".concat(se,"/api/v1/emailtemplates/").concat(e.template.emailTemplateId),{emailTemplateName:i,emailTemplateBody:c}).then((function(){alert("Email template edited!"),j("/react/emailtemplates")})).catch((function(e){alert("error in updating! staying on this page."+e)}))},children:"Update Template"})}):Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("button",{className:"btn btn-primary",onClick:function(){alert("sent a post request:\n"+("{emailTemplateName: "+i+",\n emailTemplateBody: "+c+"}")+"\nto ".concat(se,"/api/v1/emailtemplate")),f.a.post("".concat(se,"/api/v1/emailtemplates"),{emailTemplateName:i,emailTemplateBody:c}).then((function(){alert("Email template added"),j("/react/emailtemplates")})).catch((function(e){alert("error in creation! staying on this page."+e)}))},children:"Submit Template"})})]})};var re=a(534),je=a(166),de=a(537),ue=a(536),be=a(532),he=a(535),pe=a(538),Oe=a(533),ge=a(539),me=a(200),fe=a.n(me),xe=a(199),ve=a.n(xe),ye="https://pip-react-spring-postgres.herokuapp.com";var we=function(){Object(n.useEffect)((function(){l()}),[]);var e=Object(u.m)(),t=Object(n.useState)([]),a=Object(g.a)(t,2),c=a[0],o=a[1],l=function(){f.a.get("".concat(ye,"/api/v1/emailtemplates")).then((function(e){console.log(e.data),o(e.data)}))};return Object(x.jsx)("div",{class:"container rounded content",children:Object(x.jsxs)("div",{class:"card",style:{width:"60vw"},children:[Object(x.jsx)("h1",{class:"main-header",children:"Email templates"}),Object(x.jsx)("button",{className:"btn btn-primary btn-sm",style:{margin:"10px auto",width:"max-content",padding:"10px"},children:Object(x.jsx)(d.b,{to:"/react/emailtemplates/create",style:{color:"white"},children:Object(x.jsx)("h6",{children:"Create new template"})})}),Object(x.jsx)(be.a,{component:Oe.a,elavation:3,children:Object(x.jsxs)(re.a,{sx:{minWidth:640,"& td":{border:0}},"aria-label":"simple table",children:[Object(x.jsxs)(he.a,{children:[Object(x.jsx)(ue.a,{children:Object(x.jsx)(je.a,{align:"left",children:"Email Template Name"})}),Object(x.jsx)(ue.a,{align:"center"}),Object(x.jsx)(ue.a,{align:"center"})]}),Object(x.jsx)(de.a,{children:c.length>0?c.map((function(t){return Object(x.jsxs)(pe.a,{children:[Object(x.jsx)(ue.a,{align:"left",children:t.emailTemplateName}),Object(x.jsx)(ue.a,{children:Object(x.jsx)(ge.a,{"aria-label":"edit",style:{color:"#5289B5"},onClick:function(){e("/react/emailtemplates/edit/"+t.emailTemplateId)},children:Object(x.jsx)(ve.a,{})})}),Object(x.jsx)(ue.a,{align:"center",children:Object(x.jsx)(ge.a,{"aria-label":"delete",style:{color:"#5289B5"},onClick:function(){return e=t.emailTemplateId,void f.a.delete("".concat(ye,"/api/v1/emailtemplates/").concat(e)).then((function(e){alert("Email template successfully deleted"),l()}));var e},children:Object(x.jsx)(fe.a,{})})})]})})):Object(x.jsx)("h2",{children:"No templates found"})})]})})]})})};var ke=function(){var e=Object(u.o)().emailTemplateId,t=Object(n.useState)(null),a=Object(g.a)(t,2),c=a[0],o=a[1],l=function(){var t=Object(w.a)(Object(y.a)().mark((function t(){return Object(y.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.get("".concat("https://pip-react-spring-postgres.herokuapp.com","/api/v1/emailtemplates/get/").concat(e)).then((function(e){console.log(e.data),o(e.data)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=function(){var e=Object(w.a)(Object(y.a)().mark((function e(){return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e().catch(console.error)}),[]),Object(x.jsx)("div",{class:"container rounded content",children:Object(x.jsxs)("div",{class:"card",style:{width:"60rem"},children:[Object(x.jsx)("h2",{class:"main-header",children:"Edit template"}),c?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(ie,{template:c}),Object(x.jsx)("button",{className:"btn btn-secondary",children:Object(x.jsx)(d.b,{to:"/react/emailtemplates",style:{color:"white"},children:"Cancel"})})]}):Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("h4",{children:"Loading template"})})]})})};var Ce=function(){return Object(x.jsx)("div",{className:"container rounded content",children:Object(x.jsxs)("div",{className:"card",style:{width:"60rem"},children:[Object(x.jsx)("h2",{className:"main-header",children:"Create template"}),Object(x.jsx)(ie,{template:null}),Object(x.jsx)("button",{className:"btn btn-secondary btn-sm",children:Object(x.jsx)(d.b,{to:"/react/emailtemplates",style:{color:"white"},children:"Cancel"})})]})})},Se="http://localhost:8080",Le=f.a.create({baseURL:Se}),Ne=f.a.create({baseURL:Se,headers:{"Content-Type":"application/json"}}),Ie=function(){var e=E(),t=e.setAuth,a=e.auth;console.log(a,"AUTH REFRESH");var n=function(){var e=Object(w.a)(Object(y.a)().mark((function e(){var a,n,c,o,l;return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=localStorage.getItem("auth"),console.log("x",c),o=JSON.parse(c),console.log("auth",o),console.log("auth",o.accessToken),e.next=7,Le.get("/api/v1/token/refresh",{headers:{Authorization:"Bearer ".concat(o.accessToken)}});case 7:return l=e.sent,console.log(l,"REFRESHHHH"),console.log(null===l||void 0===l||null===(a=l.data)||void 0===a?void 0:a.access_token,"DEMON SLAYER"),console.log(o,"KAKKAKAKKAK"),o.accessToken=null===l||void 0===l||null===(n=l.data)||void 0===n?void 0:n.access_token,console.log(o,"HUUI OHUO"),t(o),e.abrupt("return",l.data.accessToken);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return n},Ee=function(){var e=Ie(),t=E().auth;return Object(n.useEffect)((function(){var a=Ne.interceptors.request.use((function(e){return e.headers.Authorization||(e.headers.Authorization="Bearer ".concat(null===t||void 0===t?void 0:t.accessToken)),e}),(function(e){return Promise.reject(e)})),n=Ne.interceptors.response.use((function(e){return e}),function(){var t=Object(w.a)(Object(y.a)().mark((function t(a){var n,c,o;return Object(y.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=null===a||void 0===a?void 0:a.config,403!==(null===a||void 0===a||null===(n=a.response)||void 0===n?void 0:n.status)||null!==c&&void 0!==c&&c.sent){t.next=8;break}return c.sent=!0,t.next=5,e();case 5:return o=t.sent,c.headers.Authorization="Bearer ".concat(o),t.abrupt("return",Ne(c));case 8:return t.abrupt("return",Promise.reject(a));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());return function(){Ne.interceptors.request.eject(a),Ne.interceptors.response.eject(n)}}),[t,e]),Ne},Ae=a(530),De=a(523),Fe=a(541),Te=a(540),Re=a(527),Pe=function(){var e,t=Object(n.useState)(),a=Object(g.a)(t,2),o=a[0],l=a[1],s=Ee(),i=E(),r=(i.setAuth,i.auth),j=Object(n.useState)(""),d=Object(g.a)(j,2),u=d[0],b=d[1],h=Object(n.useState)(""),p=Object(g.a)(h,2),O=p[0],m=p[1],v=Object(n.useState)(""),C=Object(g.a)(v,2),S=C[0],L=C[1],N=Object(n.useState)(""),I=Object(g.a)(N,2),A=I[0],D=I[1];console.log(r,"AUTHHH"),Object(n.useEffect)((function(){var e=!0,t=new AbortController,a=function(){var a=Object(w.a)(Object(y.a)().mark((function a(){var n;return Object(y.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,s.get("/api/v1/users",{signal:t.signal});case 3:n=a.sent,console.log(n.data),e&&l(n.data),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.error(a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(){return a.apply(this,arguments)}}();return a(),console.log(o),function(){e=!1,t.abort()}}),[]);console.log(o,"USERSS");var F=c.a.useState(!1),T=Object(g.a)(F,2),R=T[0],P=T[1],H=function(){P(!1)};return Object(x.jsx)("div",{class:"container rounded content",children:Object(x.jsxs)("div",{class:"card",style:{width:"60rem",height:"70vh"},children:[Object(x.jsxs)("div",{children:[(null===r||void 0===r||null===(e=r.roles)||void 0===e?void 0:e.includes("ROLE_ADMIN"))&&Object(x.jsx)(Ae.a,{variant:"outlined",onClick:function(){P(!0)},children:"Add new Admin"}),Object(x.jsxs)(De.a,{open:R,onClose:H,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(x.jsx)(Re.a,{id:"alert-dialog-title",children:"Add new adminstrator"}),Object(x.jsx)(Te.a,{children:Object(x.jsxs)(k.a,{className:"create-form",style:{margin:"auto"},children:[Object(x.jsxs)(k.a.Field,{children:[Object(x.jsx)("label",{children:"Name"}),Object(x.jsx)("input",{placeholder:"Name",onChange:function(e){return b(e.target.value)}})]}),Object(x.jsxs)(k.a.Field,{children:[Object(x.jsx)("label",{children:"Email"}),Object(x.jsx)("input",{placeholder:"Email",value:O,onChange:function(e){return m(e.target.value)}})]}),Object(x.jsxs)(k.a.Field,{children:[Object(x.jsx)("label",{children:"Password"}),Object(x.jsx)("input",{placeholder:"Password",value:S,onChange:function(e){return L(e.target.value)}})]}),Object(x.jsxs)(k.a.Field,{children:[Object(x.jsx)("label",{children:"Phone"}),Object(x.jsx)("input",{placeholder:"Phone",onChange:function(e){return D(e.target.value)}})]}),Object(x.jsx)(Ae.a,{onClick:function(){f.a.post("http://localhost:8080/api/v1/user/save",{username:u,email:O,password:S,phoneNumber:A,userRoles:[{id:2,name:"ROLE_ADMIN"}]}).then((function(e){console.log(e);var t="{username: "+u+",\n email: "+O+",\n password: "+S+",\n phoneNumber: "+A+",\n userRoles: "+JSON.stringify([{id:2,name:"ROLE_ADMIN"}])+"}";alert("sent a post request:\n"+t+"\nto http://localhost:8080/api/v1/user/save")})).catch((function(e){S.length<8?alert("Password too short \n"+e):alert("Email is not valid \n"+e)}))},type:"submit",children:"Register"})]})}),Object(x.jsx)(Fe.a,{children:Object(x.jsx)(Ae.a,{onClick:H,autoFocus:!0,children:"Close"})})]})]}),Object(x.jsx)("h2",{children:"Users List"}),null!==o&&void 0!==o&&o.length?Object(x.jsx)(be.a,{component:Oe.a,elevation:3,children:Object(x.jsxs)(re.a,{sx:{minWidth:640,"& td":{border:0}},"aria-label":"simple table",children:[Object(x.jsx)(he.a,{children:Object(x.jsxs)(pe.a,{children:[Object(x.jsx)(ue.a,{children:"User ID"}),Object(x.jsx)(ue.a,{children:"User Name"}),Object(x.jsx)(ue.a,{align:"left",children:"User Email"}),Object(x.jsx)(ue.a,{align:"left",children:"Phone Number"}),Object(x.jsx)(ue.a,{align:"left",children:"Role/s"}),Object(x.jsx)(ue.a,{align:"center"}),Object(x.jsx)(ue.a,{align:"center"})]})}),Object(x.jsx)(de.a,{children:null===o||void 0===o?void 0:o.map((function(e){var t,a;return Object(x.jsxs)(pe.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(x.jsx)(ue.a,{align:"left",children:e.id}),Object(x.jsx)(ue.a,{align:"left",children:e.username}),Object(x.jsx)(ue.a,{align:"left",children:e.email}),Object(x.jsx)(ue.a,{align:"left",children:e.phoneNumber}),Object(x.jsx)(ue.a,{align:"left",children:e.userRoles.length>1?null===(t=e.userRoles)||void 0===t?void 0:t.map((function(e){return"".concat(e.name,", ")})):null===(a=e.userRoles)||void 0===a?void 0:a.map((function(e){return"".concat(e.name)}))}),Object(x.jsx)(ue.a,{align:"center",children:Object(x.jsx)(ge.a,{"aria-label":"delete",style:{color:"#5289B5"},onClick:function(){return t=e.id,void f.a.delete("http://localhost:8080/api/v1/users/delete/".concat(t)).then((function(e){alert("User ".concat(t," deleted"))}));var t},children:Object(x.jsx)(fe.a,{})})}),Object(x.jsx)(ue.a,{align:"center",children:Object(x.jsx)(ge.a,{"aria-label":"edit",style:{color:"#5289B5"},href:"/".concat(e.id),children:Object(x.jsx)(ve.a,{})})})]},e.id)}))})]})}):Object(x.jsx)("p",{children:"You do not have the access rights"})]})})},He=a(203),Be=a(38);Be.e.register(Be.d,Be.i,Be.b,Be.n,Be.o,Be.g);function Ue(){var e=Object(n.useState)({}),t=Object(g.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),l=Object(g.a)(o,2),s=l[0],i=l[1],r=Object(n.useState)({}),j=Object(g.a)(r,2),d=j[0],u=j[1],b=Object(n.useState)("1"),h=Object(g.a)(b,2),p=h[0],O=h[1],m=Object(n.useState)("Monthly"),v=Object(g.a)(m,2),y=v[0],w=v[1],k=Object(n.useState)(["Jan 22","Feb 22","Mar 22","Apr 22","May 22","Jun 22","Jul 22","Aug 22","Sep 22","Oct 22","Nov 22","Dec 22"]),C=Object(g.a)(k,2),S=C[0],L=C[1],N=Object(n.useState)([]),I=Object(g.a)(N,2),E=I[0],A=I[1],D=Object(n.useState)("2022"),F=Object(g.a)(D,2),T=F[0],R=F[1],P=Object(n.useState)([]),H=Object(g.a)(P,2),B=H[0],U=H[1];function M(e){w(e.target.value),c(a)}if(Object(n.useEffect)((function(){var e={},t={},a={},n=["1","2","3","4","5","6"];f.a.get("https://pip-react-spring-postgres.herokuapp.com/api/v1/successloan").then((function(c){c.data.forEach((function(c){c.staffId==p&&(c.year in e||(e[c.year]=[0,0,0,0,0,0,0,0,0,0,0,0]),e[c.year][parseInt(c.month)-1]+=1,c.year in t?t[c.year]+=1:t[c.year]=1,c.year in a||(a[c.year]=[0,0]),n.includes(c.month)?a[c.year][0]+=1:a[c.year][1]+=1)}));var o=Object.keys(t);if(o.sort(),U(o),"Monthly"==y){A(e[T]);var l=T.slice(2,4);L(["Jan "+l,"Feb "+l,"Mar "+l,"Apr "+l,"May "+l,"Jun "+l,"Jul "+l,"Aug "+l,"Sep "+l,"Oct "+l,"Nov "+l,"Dec "+l])}else if("Bi-Annually"==y){var s=Object.keys(a);s.sort();for(var i=[],r=[],j=0,d=s;j<d.length;j++){var u=d[j];i.push(u+" 1st"),i.push(u+" 2nd"),r.push(a[u][0]),r.push(a[u][1])}A(r),L(i)}else if("Annually"==y){var b=Object.keys(t);b.sort();for(var h=[],O=[],g=0,m=b;g<m.length;g++){u=m[g];h.push(u),O.push(t[u])}A(O),L(h)}}))}),[p,y,T]),Object(n.useEffect)((function(){c({labels:S,datasets:[{label:"employee "+p+"'s pass booking records",data:E,backgroundColor:["rgba(255, 99, 132, 0.5)"],borderColor:["rgba(255, 99, 132, 1)"]}]}),u({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:"Employee bookings "+y}}}),i(!0)}),[E,S]),s)return Object(x.jsxs)("div",{style:{height:"500px",width:"80%"},children:["Employee ID: ",Object(x.jsx)("input",{name:"EmployeeID",value:p,onChange:function(e){O(e.target.value),c(a)}}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("button",{value:"Monthly",onClick:M,children:"Monthly"})," :",Object(x.jsx)("select",{onChange:function(e){R(e.target.value),w("Monthly"),c(a)},children:B.map((function(e){return Object(x.jsx)("option",{value:e,children:e})}))})," ",Object(x.jsx)("button",{value:"Bi-Annually",onClick:M,children:"Bi-Annually"})," ",Object(x.jsx)("button",{value:"Annually",onClick:M,children:"Annually"}),Object(x.jsx)(He.a,{data:a,options:d})]})}Be.e.register(Be.d,Be.i,Be.b,Be.n,Be.o,Be.g);function Me(){var e=Object(n.useState)({}),t=Object(g.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),l=Object(g.a)(o,2),s=l[0],i=l[1],r=Object(n.useState)({}),j=Object(g.a)(r,2),d=j[0],u=j[1],b=Object(n.useState)("2022"),h=Object(g.a)(b,2),p=h[0],O=h[1],m=Object(n.useState)(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),v=Object(g.a)(m,2),y=v[0],w=(v[1],Object(n.useState)([])),k=Object(g.a)(w,2),C=k[0],S=k[1];if(Object(n.useEffect)((function(){var e={},t={1:new Set,2:new Set,3:new Set,4:new Set,5:new Set,6:new Set,7:new Set,8:new Set,9:new Set,10:new Set,11:new Set,12:new Set},a=[];f.a.get("https://pip-react-spring-postgres.herokuapp.com/api/v1/successloan").then((function(n){n.data.forEach((function(a){a.year in e||(e[a.year]=[0,0,0,0,0,0,0,0,0,0,0,0]),e[a.year][parseInt(a.month)-1]+=1,a.year==p&&t[a.month].add(a.staffId)}));for(var o=0,l=Object.keys(t);o<l.length;o++){var s=l[o];console.log(t[s]),a.push(t[s].size)}O(p),c({labels:y,datasets:[{label:"No of loans per month in "+p,data:e[p],backgroundColor:["rgba(255, 99, 132, 0.5)"],borderColor:["rgba(255, 99, 132, 1)"]},{label:"No of borrowers per month in "+p,data:a,backgroundColor:["rgba(54, 162, 235, 0.5)"],borderColor:["rgba(54, 162, 235, 1)"]}]}),S(Object.keys(e)),u({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:"Monthly chart in "+p}}}),i(!0)}))}),[p]),s)return Object(x.jsxs)("div",{style:{height:"500px",width:"80%"},children:["Select Year:",Object(x.jsx)("select",{value:p,onChange:function(e){O(e.target.value),c(a)},children:C.map((function(e){return Object(x.jsx)("option",{value:e,children:e})}))}),Object(x.jsx)(He.a,{data:a,options:d})]})}var Je=function(e){Object(r.a)(a,e);var t=Object(j.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(x.jsx)(d.a,{children:Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)(h.a,{bg:"light",expand:"lg",fixed:"top",children:Object(x.jsxs)(O.a,{children:[Object(x.jsx)(h.a.Brand,{href:"#home",children:"Corporate Pass Application"}),Object(x.jsx)(h.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(x.jsx)(h.a.Collapse,{id:"basic-navbar-nav",children:Object(x.jsxs)(b.a,{className:"me-auto",defaultActiveKey:"/react",as:"ul",children:[Object(x.jsx)(b.a.Item,{as:"li",children:Object(x.jsx)(b.a.Link,{href:"",children:Object(x.jsx)(d.b,{to:"/react",children:"Home"})})}),Object(x.jsx)(b.a.Link,{href:"",children:Object(x.jsx)(d.b,{to:"/react/auth",children:"Authenticate"})}),Object(x.jsx)(b.a.Link,{href:"",children:Object(x.jsx)(d.b,{to:"/react/loan",children:"Loan Application"})}),Object(x.jsx)(b.a.Link,{href:"",children:Object(x.jsx)(d.b,{to:"/react/viewbooking",children:"View Booking"})}),Object(x.jsx)(b.a.Link,{href:"",children:Object(x.jsx)(d.b,{to:"/react/emailtemplates",children:"Email Templates"})}),Object(x.jsx)(b.a.Link,{href:"",children:Object(x.jsx)(d.b,{to:"/react/users",children:"Users"})}),Object(x.jsx)(b.a.Link,{href:"",children:Object(x.jsx)(d.b,{to:"/react/read",children:"Loanpass"})}),Object(x.jsxs)(p.a,{title:"Statistics",id:"basic-nav-dropdown",children:[Object(x.jsx)(p.a.Item,{href:"",children:Object(x.jsx)(d.b,{to:"/react/employeestatistic",children:"Employee Statistics"})}),Object(x.jsx)(p.a.Item,{href:"",children:Object(x.jsx)(d.b,{to:"/react/monthlystatistic",children:"Monthly Statistics"})}),Object(x.jsx)(p.a.Item,{href:"",children:"Something"}),Object(x.jsx)(p.a.Divider,{}),Object(x.jsx)(p.a.Item,{href:"",children:"Separated link"})]})]})})]})}),Object(x.jsx)("div",{className:"main",children:Object(x.jsxs)(u.c,{children:[Object(x.jsx)(u.a,{exact:!0,path:"/react",element:Object(x.jsx)(v,{})}),Object(x.jsx)(u.a,{exact:!0,path:"/react/auth",element:Object(x.jsx)(D,{})}),Object(x.jsx)(u.a,{exact:!0,path:"/react/createloanpass",element:Object(x.jsx)(B,{})}),Object(x.jsx)(u.a,{exact:!0,path:"/react/read",element:Object(x.jsx)(P,{})}),Object(x.jsx)(u.a,{exact:!0,path:"/react/update",element:Object(x.jsx)(H,{})}),Object(x.jsx)(u.a,{exact:!0,path:"/react/loan",element:Object(x.jsx)($,{})}),Object(x.jsx)(u.a,{exact:!0,path:"/react/viewbooking",element:Object(x.jsx)(ce,{})}),Object(x.jsx)(u.a,{exact:!0,path:"/react/emailtemplates",element:Object(x.jsx)(we,{})}),Object(x.jsx)(u.a,{exact:!0,path:"/react/emailtemplates/create",element:Object(x.jsx)(Ce,{})}),Object(x.jsx)(u.a,{exact:!0,path:"/react/emailtemplates/edit/:emailTemplateId",element:Object(x.jsx)(ke,{})}),Object(x.jsx)(u.a,{exact:!0,path:"/react/users",element:Object(x.jsx)(Pe,{})}),Object(x.jsx)(u.a,{exact:!0,path:"/react/employeestatistic",element:Object(x.jsx)(Ue,{})}),Object(x.jsx)(u.a,{exact:!0,path:"/react/monthlystatistic",element:Object(x.jsx)(Me,{})})]})})]})})}}]),a}(c.a.Component),Ve=Je,We=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,543)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,o=t.getLCP,l=t.getTTFB;a(e),n(e),c(e),o(e),l(e)}))};a(469);l.a.createRoot(document.getElementById("root")).render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(N,{children:Object(x.jsx)(Ve,{})})})),We()}},[[471,1,2]]]);
//# sourceMappingURL=main.317926c9.chunk.js.map